# Схема данных в БД
![image](https://github.com/user-attachments/assets/a914d0d7-046b-4cd2-b850-2d7c1c8ed9dd)

# Описание структуры базы данных
 - Данная база данных реализует информационную систему предоставления государственных услуг. В ней представлены 
   сущности, такие как пользователи, администраторы, госслужащие, заявки, услуги и правила, регулирующие их 
   предоставление.

## 1. Таблица account
 - Хранит данные учётной записи: логин, пароль и роль (пользователь, администратор, госслужащий). Используется всеми 
   участниками системы: пользователем, администратором, госслужащим.

### Атрибуты:
 - id — идентификатор учётной записи (primary key).
 - login — логин учётной записи (уникальный, не может быть пустым).
 - password — пароль учётной записи (не может быть пустым).
 - role — роль учётной записи (не может быть пустой).

### Связи:
 - user.account_id → account.id
 - government_employee.account_id → account.id
 - administrator.account_id → account.id
 - При удалении аккаунта соответствующий пользователь, администратор или госслужащий тоже удаляется (ON DELETE 
   CASCADE).

## 2. Таблица user
 - Представляет гражданина, подающего заявки на государственные услуги.
### Атрибуты:
 - id — идентификатор пользователя (primary key).
 - account_id — идентификатор учётной записи пользователя.
 - last_name — фамилия пользователя.
 - first_name — имя пользователя.
 - middle_name — отчество пользователя.
 - citizenship — гражданство пользователя.
 - passport_series — серия паспорта.
 - passport_number — номер паспорта.
 - tin — ИНН.
 - email — электронная почта.
 - city — город.
 - street — улица.
 - house — номер дома.
 - apartment — номер квартиры.

### Связь:
 - Привязана к account через account_id.

## 3. Таблица government_employee
 - Представляет госслужащего, обрабатывающего заявки на услуги.

### Атрибуты:
 - id — идентификатор госслужащего (primary key).
 - account_id — идентификатор учётной записи госслужащего.

### Связь:
 - Привязана к account через account_id.

## 4. Таблица administrator
 - Представляет администратора, управляющего системой и услугами.

### Атрибуты:
 - id — идентификатор администратора (primary key).
 - account_id — идентификатор учётной записи администратора.

### Связь:
 - Привязана к account через account_id.

## 5. Таблица service
 - Описывает государственную услугу: название, описание, даты начала и окончания.

### Атрибуты:
 - id — идентификатор услуги (primary key).
 - name — название услуги.
 - description — описание услуги.
 - start_date — дата начала предоставления услуги.
 - end_date — дата окончания предоставления услуги.
 - admin_id — идентификатор администратора, управляющего услугой.

### Связи:
 - Связана с administrator через admin_id.

## 6. Таблица rule
 - Описывает правило предоставления услуги: Параметр пользователя, оператор сравнения (>, =, <), значение и срок 
   действия.

### Атрибуты:
 - id — идентификатор правила (primary key).
 - name — название правила.
 - description — описание правила.
 - operator — оператор сравнения (>, =, <).
 - value — значение для сравнения.
 - user_parameter — параметр пользователя, связанный с правилом.
 - term — срок действия правила.
 - service_id — идентификатор услуги, к которой привязано правило (не может быть пустым).

### Связи:
 - Привязано к service через service_id.

## 7. Таблица application
 - Заявка на услугу, подаётся пользователем.

### Атрибуты:
 - id — идентификатор заявки (primary key).
 - status — статус заявки.
 - submission_date — дата подачи заявки.
 - result — результат обработки заявки.
 - completion_date — дата завершения заявки.
 - user_id — идентификатор пользователя, подающего заявку.
 - service_id — идентификатор услуги, на которую подаётся заявка.
 - employee_id — идентификатор госслужащего, обрабатывающего заявку.

### Связи:
 - user_id → user.id — пользователь, подающий заявку.
 - service_id → service.id — услуга, на которую подаётся заявка.
 - employee_id → government_employee.id — госслужащий, обрабатывающий заявку.
 - При удалении пользователя, услуги или госслужащего — ссылка обнуляется (ON DELETE SET NULL), чтобы сохранить 
   историю заявок.

## Общие связи в системе:
 - Один account может быть привязан к одному из следующих: user, administrator или government_employee.
 - Один user может подать несколько заявок (application).
 - Одна service может быть связана с несколькими rule (через service_id).
 - Одно rule может использоваться в нескольких service.
 - Один administrator может управлять несколькими service (через admin_id).

## Ссылки на таблицы:
 - account.id < user.account_id (DELETE CASCADE).
 - account.id < government_employee.account_id (DELETE CASCADE).
 - account.id < administrator.account_id (DELETE CASCADE).
 - service.id < rule.service_id (DELETE CASCADE).
 - user.id < application.user_id (DELETE SET NULL).
 - service.id < application.service_id (DELETE SET NULL).
 - government_employee.id < application.employee_id (DELETE SET NULL).
